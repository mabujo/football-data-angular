"use strict";var footballData=angular.module("footballData",["ngResource","ngRoute","ngMaterial"]),apiKey="a7b54dff3a364e4db2f8bde4c7bbff0c";footballData.config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("orange")}]),footballData.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"templates/SiteHome.html",controller:"SiteHomeController"}),e.when("/season/:seasonId",{title:"Season",templateUrl:"templates/Season.html",controller:"SeasonController"}),e.when("/players/:teamId",{title:"Players",templateUrl:"templates/Players.html",controller:"PlayersController"}),e.otherwise({redirectTo:"/"})}]),footballData.controller("MainMenuController",["$scope","$location",function(e,t){}]),footballData.controller("PageAttributesController",["$scope","pageAttributes",function(e,t){e.pageAttributes=t}]),footballData.controller("PlayersController",["$scope","$location","teamDetails","$routeParams","$route","pageAttributes",function(e,t,a,o,r,n){var l=r.current.pathParams.teamId;e.team=a.getTeam(l),e.players=a.getPlayers(l),e.pageAttributes=n,n.setTitle("Players | Football Data Angular")}]),footballData.controller("SeasonController",["$scope","$location","listSeasons","seasonDetails","$routeParams","$route","pageAttributes",function(e,t,a,o,r,n,l){var s=n.current.pathParams.seasonId;e.singleSeason=a.getSeason(s),e.teams=o.getTeams(s),e.fixtures=o.getFixtures(s),e.leagueTable=o.getLeagueTable(s),e.pageAttributes=l,l.setTitle("Season | Football Data Angular")}]),footballData.controller("SiteHomeController",["$scope","$location","listSeasons","pageAttributes",function(e,t,a,o){e.yearsAvailable=[{id:1,name:"2013"},{id:2,name:"2014"},{id:3,name:"2015"},{id:4,name:"2016"}],e.selectedYear={id:3,name:"2015"},e.switchYear=function(){e.seasons=a.getAllSeasons(e.selectedYear.name)},e.seasons=a.getAllSeasons(e.selectedYear.name),e.pageAttributes=o,o.setTitle("Football Data Angular")}]),footballData.filter("orderObjectBy",function(){return function(e,t,a){var o=[];return angular.forEach(e,function(e){o.push(e)}),o.sort(function(e,a){return e[t]>a[t]?1:-1}),a&&o.reverse(),o}}),footballData.filter("teamIdFromUrl",function(){return function(e){var t=e.match(/\/([^\/]*)$/)[1];return t}}),footballData.filter("toArray",function(){return function(e,t){return angular.isObject(e)?t===!1?Object.keys(e).map(function(t){return e[t]}):Object.keys(e).map(function(t){var a=e[t];return angular.isObject(a)?Object.defineProperty(a,"$key",{enumerable:!1,value:t}):{$key:t,$value:a}}):e}}),footballData.factory("listSeasons",["$resource","$http",function(e,t){t.defaults.headers.common["X-Auth-Token"]=apiKey;var a=e("http://api.football-data.org/v1/soccerseasons/:singleSeason",{singleSeason:"@singleSeason"},{query:{method:"GET",cache:!0,isArray:!0},get:{method:"GET",isArray:!1,cache:!0}});return{getSeason:function(e){return a.get({singleSeason:e})},getAllSeasons:function(e){return a.query({season:e})}}}]),footballData.factory("pageAttributes",function(){var e="Football Data Angular";return{title:function(){return e},setTitle:function(t){e=t}}}),footballData.factory("seasonDetails",["$resource","$http",function(e,t){t.defaults.headers.common["X-Auth-Token"]=apiKey;var a=e("http://api.football-data.org/v1/soccerseasons/:singleSeason",{singleSeason:"@singleSeason"},{getTeams:{method:"GET",cache:!0,isArray:!1,url:"http://api.football-data.org/v1/soccerseasons/:singleSeason/teams"},getFixtures:{method:"GET",isArray:!1,cache:!0,url:"http://api.football-data.org/v1/soccerseasons/:singleSeason/fixtures"},getLeagueTable:{method:"GET",isArray:!1,cache:!0,url:"http://api.football-data.org/v1/soccerseasons/:singleSeason/leagueTable"}});return{getTeams:function(e){return a.getTeams({singleSeason:e})},getFixtures:function(e){return a.getFixtures({singleSeason:e})},getLeagueTable:function(e){return a.getLeagueTable({singleSeason:e})}}}]),footballData.factory("teamDetails",["$resource","$http",function(e,t){t.defaults.headers.common["X-Auth-Token"]=apiKey;var a=e("http://api.football-data.org/v1/teams/:teamId",{teamId:"@teamId"},{getTeam:{method:"GET",cache:!0,isArray:!1},getPlayers:{method:"GET",cache:!0,isArray:!1,url:"http://api.football-data.org/v1/teams/:teamId/players"},getFixtures:{method:"GET",isArray:!1,cache:!0,url:"http://api.football-data.org/v1/soccerseasons/:teamId/fixtures"}});return{getPlayers:function(e){return a.getPlayers({teamId:e})},getTeam:function(e){return a.getTeam({teamId:e})},getFixtures:function(e){return a.getFixtures({teamId:e})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy9hcGlLZXkuanMiLCJjb25maWcvY29sb3Vycy5qcyIsImNvbmZpZy9yb3V0ZXMuanMiLCJjb250cm9sbGVycy9NYWluTWVudUNvbnRyb2xsZXIuanMiLCJhcHAvZGlzdC9qcy9tYWluLmpzIiwiY29udHJvbGxlcnMvUGFnZUF0dHJpYnV0ZXNDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvUGxheWVyc0NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9TZWFzb25Db250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvU2l0ZUhvbWVDb250cm9sbGVyLmpzIiwiZmlsdGVycy9vcmRlck9iamVjdEJ5LmpzIiwiZmlsdGVycy90ZWFtSWQuanMiLCJmaWx0ZXJzL3RvQXJyYXkuanMiLCJzZXJ2aWNlcy9MaXN0U2Vhc29ucy5qcyIsInNlcnZpY2VzL1BhZ2VBdHRyaWJ1dGVzLmpzIiwic2VydmljZXMvU2Vhc29uRGV0YWlscy5qcyIsInNlcnZpY2VzL3RlYW1EZXRhaWxzLmpzIl0sIm5hbWVzIjpbImZvb3RiYWxsRGF0YSIsImFuZ3VsYXIiLCJtb2R1bGUiLCJhcGlLZXkiLCJjb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwidGl0bGUiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiJHNjb3BlIiwiJGxvY2F0aW9uIiwicGFnZUF0dHJpYnV0ZXMiLCJ0ZWFtRGV0YWlscyIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsInRlYW1JZCIsImN1cnJlbnQiLCJwYXRoUGFyYW1zIiwidGVhbSIsImdldFRlYW0iLCJwbGF5ZXJzIiwiZ2V0UGxheWVycyIsInNldFRpdGxlIiwibGlzdFNlYXNvbnMiLCJzZWFzb25EZXRhaWxzIiwic2Vhc29uSWQiLCJzaW5nbGVTZWFzb24iLCJnZXRTZWFzb24iLCJ0ZWFtcyIsImdldFRlYW1zIiwiZml4dHVyZXMiLCJnZXRGaXh0dXJlcyIsImxlYWd1ZVRhYmxlIiwiZ2V0TGVhZ3VlVGFibGUiLCJ5ZWFyc0F2YWlsYWJsZSIsImlkIiwibmFtZSIsInNlbGVjdGVkWWVhciIsInN3aXRjaFllYXIiLCJzZWFzb25zIiwiZ2V0QWxsU2Vhc29ucyIsImZpbHRlciIsIml0ZW1zIiwiZmllbGQiLCJyZXZlcnNlIiwiZmlsdGVyZWQiLCJmb3JFYWNoIiwiaXRlbSIsInB1c2giLCJzb3J0IiwiYSIsImIiLCJ0ZWFtVXJsIiwibWF0Y2giLCJvYmoiLCJhZGRLZXkiLCJpc09iamVjdCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJrZXkiLCJ2YWx1ZSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIiRrZXkiLCIkdmFsdWUiLCJmYWN0b3J5IiwiJHJlc291cmNlIiwiJGh0dHAiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJyZXNvdXJjZSIsInF1ZXJ5IiwibWV0aG9kIiwiY2FjaGUiLCJpc0FycmF5IiwiZ2V0Iiwic2Vhc29uWWVhciIsInNlYXNvbiIsIm5ld1RpdGxlIiwidXJsIl0sIm1hcHBpbmdzIjoiQUFDQSxZQUVBLElBQUFBLGNBQUFDLFFBQUFDLE9BQUEsZ0JBQUEsYUFBQSxVQUFBLGVDSEFDLE9BQUEsa0NDRUFILGNBQUFJLFFBQUEscUJBQUEsU0FBQUMsR0FDQUEsRUFBQUMsTUFBQSxXQUNBQyxlQUFBLFFBQ0FDLGNBQUEsYUNIQVIsYUFBQUksUUFBQSxpQkFBQSxvQkFBQSxTQUFBSyxFQUFBQyxHQUNBRCxFQUFBRSxLQUFBLEtBRUFDLFlBQUEsMEJBQ0FDLFdBQUEsdUJBRUFKLEVBQUFFLEtBQUEscUJBRUFHLE1BQUEsU0FDQUYsWUFBQSx3QkFDQUMsV0FBQSxxQkFFQUosRUFBQUUsS0FBQSxvQkFFQUcsTUFBQSxVQUNBRixZQUFBLHlCQUNBQyxXQUFBLHNCQUdBSixFQUFBTSxXQUFBQyxXQUFB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QUFBLG1FQUlBLFFBQ0E1RCxXQUFBLFNBQUFOLEdBQ0EsTUFBQXlELEdBQUFuRCxZQUFBTixPQUFBQSxLQUVBSSxRQUFBLFNBQUFKLEdBQ0EsTUFBQXlELEdBQUFyRCxTQUFBSixPQUFBQSxLQUVBZ0IsWUFBQSxTQUFBaEIsR0FDQSxNQUFBeUQsR0FBQXpDLGFBQUFoQixPQUFBQSIsImZpbGUiOiJhcHAvZGlzdC9qcy9tYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoganNoaW50IC1XMDk3ICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBmb290YmFsbERhdGEgPSBhbmd1bGFyLm1vZHVsZSgnZm9vdGJhbGxEYXRhJywgWyduZ1Jlc291cmNlJywgJ25nUm91dGUnLCAnbmdNYXRlcmlhbCddKTsiLCJ2YXIgYXBpS2V5ID0gJ2E3YjU0ZGZmM2EzNjRlNGRiMmY4YmRlNGM3YmJmZjBjJzsiLCIndXNlIHN0cmljdCc7XG5cbmZvb3RiYWxsRGF0YS5jb25maWcoZnVuY3Rpb24oJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XG4gICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcbiAgICAuYWNjZW50UGFsZXR0ZSgnb3JhbmdlJyk7XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbmZvb3RiYWxsRGF0YS5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLFxuXHR7XG5cdFx0dGVtcGxhdGVVcmw6J3RlbXBsYXRlcy9TaXRlSG9tZS5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnU2l0ZUhvbWVDb250cm9sbGVyJ1xuXHR9KTtcblx0JHJvdXRlUHJvdmlkZXIud2hlbignL3NlYXNvbi86c2Vhc29uSWQnLFxuXHR7XG5cdFx0dGl0bGU6ICdTZWFzb24nLFxuXHRcdHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL1NlYXNvbi5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnU2Vhc29uQ29udHJvbGxlcidcblx0fSk7XG5cdCRyb3V0ZVByb3ZpZGVyLndoZW4oJy9wbGF5ZXJzLzp0ZWFtSWQnLFxuXHR7XG5cdFx0dGl0bGU6ICdQbGF5ZXJzJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9QbGF5ZXJzLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdQbGF5ZXJzQ29udHJvbGxlcicsXG5cdH0pO1xuXG5cdCRyb3V0ZVByb3ZpZGVyLm90aGVyd2lzZSh7cmVkaXJlY3RUbzogJy8nfSk7XG5cblx0LyogU2V0IHRvIHRydWUgb25seSBpZiB1c2luZyB3ZWIgc2VydmVyIHRvIGRpcmVjdCBldmVyeXRoaW5nIHRvIGluZGV4Ki9cblx0Ly8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59KTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5mb290YmFsbERhdGEuY29udHJvbGxlcignTWFpbk1lbnVDb250cm9sbGVyJyxcclxuICAgIGZ1bmN0aW9uIE1haW5NZW51Q29udHJvbGxlcigkc2NvcGUsICRsb2NhdGlvbikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdhYnNVcmw6JywgJGxvY2F0aW9uLmFic1VybCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncHJvdG9jb2w6JywgJGxvY2F0aW9uLnByb3RvY29sKCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwb3J0OicsICRsb2NhdGlvbi5wb3J0KCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdob3N0OicsICRsb2NhdGlvbi5ob3N0KCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwYXRoOicsICRsb2NhdGlvbi5wYXRoKCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzZWFyY2g6JywgJGxvY2F0aW9uLnNlYXJjaCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnaGFzaDonLCAkbG9jYXRpb24uaGFzaCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygndXJsOicsICRsb2NhdGlvbi51cmwoKSk7XHJcbiAgICB9KTsiLCIvKiBqc2hpbnQgLVcwOTcgKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGZvb3RiYWxsRGF0YSA9IGFuZ3VsYXIubW9kdWxlKCdmb290YmFsbERhdGEnLCBbJ25nUmVzb3VyY2UnLCAnbmdSb3V0ZScsICduZ01hdGVyaWFsJ10pO1xudmFyIGFwaUtleSA9ICdhN2I1NGRmZjNhMzY0ZTRkYjJmOGJkZTRjN2JiZmYwYyc7XG4ndXNlIHN0cmljdCc7XG5cbmZvb3RiYWxsRGF0YS5jb25maWcoW1wiJG1kVGhlbWluZ1Byb3ZpZGVyXCIsIGZ1bmN0aW9uKCRtZFRoZW1pbmdQcm92aWRlcikge1xuICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxuICAgIC5wcmltYXJ5UGFsZXR0ZSgnYmx1ZScpXG4gICAgLmFjY2VudFBhbGV0dGUoJ29yYW5nZScpO1xufV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5mb290YmFsbERhdGEuY29uZmlnKFtcIiRyb3V0ZVByb3ZpZGVyXCIsIFwiJGxvY2F0aW9uUHJvdmlkZXJcIiwgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLFxuXHR7XG5cdFx0dGVtcGxhdGVVcmw6J3RlbXBsYXRlcy9TaXRlSG9tZS5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnU2l0ZUhvbWVDb250cm9sbGVyJ1xuXHR9KTtcblx0JHJvdXRlUHJvdmlkZXIud2hlbignL3NlYXNvbi86c2Vhc29uSWQnLFxuXHR7XG5cdFx0dGl0bGU6ICdTZWFzb24nLFxuXHRcdHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL1NlYXNvbi5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnU2Vhc29uQ29udHJvbGxlcidcblx0fSk7XG5cdCRyb3V0ZVByb3ZpZGVyLndoZW4oJy9wbGF5ZXJzLzp0ZWFtSWQnLFxuXHR7XG5cdFx0dGl0bGU6ICdQbGF5ZXJzJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9QbGF5ZXJzLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdQbGF5ZXJzQ29udHJvbGxlcicsXG5cdH0pO1xuXG5cdCRyb3V0ZVByb3ZpZGVyLm90aGVyd2lzZSh7cmVkaXJlY3RUbzogJy8nfSk7XG5cblx0LyogU2V0IHRvIHRydWUgb25seSBpZiB1c2luZyB3ZWIgc2VydmVyIHRvIGRpcmVjdCBldmVyeXRoaW5nIHRvIGluZGV4Ki9cblx0Ly8kbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59XSk7XG4ndXNlIHN0cmljdCc7XHJcblxyXG5mb290YmFsbERhdGEuY29udHJvbGxlcignTWFpbk1lbnVDb250cm9sbGVyJyxcclxuICAgIFtcIiRzY29wZVwiLCBcIiRsb2NhdGlvblwiLCBmdW5jdGlvbiBNYWluTWVudUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9jYXRpb24pIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnYWJzVXJsOicsICRsb2NhdGlvbi5hYnNVcmwoKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Byb3RvY29sOicsICRsb2NhdGlvbi5wcm90b2NvbCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncG9ydDonLCAkbG9jYXRpb24ucG9ydCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnaG9zdDonLCAkbG9jYXRpb24uaG9zdCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncGF0aDonLCAkbG9jYXRpb24ucGF0aCgpKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2VhcmNoOicsICRsb2NhdGlvbi5zZWFyY2goKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2hhc2g6JywgJGxvY2F0aW9uLmhhc2goKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3VybDonLCAkbG9jYXRpb24udXJsKCkpO1xyXG4gICAgfV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5mb290YmFsbERhdGEuY29udHJvbGxlcignUGFnZUF0dHJpYnV0ZXNDb250cm9sbGVyJyxcbiAgICBbXCIkc2NvcGVcIiwgXCJwYWdlQXR0cmlidXRlc1wiLCBmdW5jdGlvbiBQbGF5ZXJzQ29udHJvbGxlcigkc2NvcGUsIHBhZ2VBdHRyaWJ1dGVzKSB7XG4gICAgXHQkc2NvcGUucGFnZUF0dHJpYnV0ZXMgPSBwYWdlQXR0cmlidXRlcztcbiAgICB9XVxuKTtcbid1c2Ugc3RyaWN0JztcblxuZm9vdGJhbGxEYXRhLmNvbnRyb2xsZXIoJ1BsYXllcnNDb250cm9sbGVyJyxcbiAgICBbXCIkc2NvcGVcIiwgXCIkbG9jYXRpb25cIiwgXCJ0ZWFtRGV0YWlsc1wiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiRyb3V0ZVwiLCBcInBhZ2VBdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIFBsYXllcnNDb250cm9sbGVyKCRzY29wZSwgJGxvY2F0aW9uLCB0ZWFtRGV0YWlscywgJHJvdXRlUGFyYW1zLCAkcm91dGUsIHBhZ2VBdHRyaWJ1dGVzKSB7XG4gICAgXHR2YXIgdGVhbUlkID0gJHJvdXRlLmN1cnJlbnQucGF0aFBhcmFtcy50ZWFtSWQ7XG4gICAgXHQkc2NvcGUudGVhbSA9IHRlYW1EZXRhaWxzLmdldFRlYW0odGVhbUlkKTtcbiAgICAgICAgJHNjb3BlLnBsYXllcnMgPSB0ZWFtRGV0YWlscy5nZXRQbGF5ZXJzKHRlYW1JZCk7XG5cbiAgICBcdCRzY29wZS5wYWdlQXR0cmlidXRlcyA9IHBhZ2VBdHRyaWJ1dGVzO1xuICAgIFx0cGFnZUF0dHJpYnV0ZXMuc2V0VGl0bGUoJ1BsYXllcnMgfCBGb290YmFsbCBEYXRhIEFuZ3VsYXInKTtcbiAgICB9XVxuKTtcbid1c2Ugc3RyaWN0JztcblxuZm9vdGJhbGxEYXRhLmNvbnRyb2xsZXIoJ1NlYXNvbkNvbnRyb2xsZXInLFxuICAgIFtcIiRzY29wZVwiLCBcIiRsb2NhdGlvblwiLCBcImxpc3RTZWFzb25zXCIsIFwic2Vhc29uRGV0YWlsc1wiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiRyb3V0ZVwiLCBcInBhZ2VBdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIFNlYXNvbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9jYXRpb24sIGxpc3RTZWFzb25zLCBzZWFzb25EZXRhaWxzLCAkcm91dGVQYXJhbXMsICRyb3V0ZSwgcGFnZUF0dHJpYnV0ZXMpIHtcbiAgICBcdHZhciBzZWFzb25JZCA9ICRyb3V0ZS5jdXJyZW50LnBhdGhQYXJhbXMuc2Vhc29uSWQ7XG4gICAgICAgICRzY29wZS5zaW5nbGVTZWFzb24gPSBsaXN0U2Vhc29ucy5nZXRTZWFzb24oc2Vhc29uSWQpO1xuICAgICAgICAkc2NvcGUudGVhbXMgPSBzZWFzb25EZXRhaWxzLmdldFRlYW1zKHNlYXNvbklkKTtcbiAgICAgICAgJHNjb3BlLmZpeHR1cmVzID0gc2Vhc29uRGV0YWlscy5nZXRGaXh0dXJlcyhzZWFzb25JZCk7XG4gICAgICAgICRzY29wZS5sZWFndWVUYWJsZSA9IHNlYXNvbkRldGFpbHMuZ2V0TGVhZ3VlVGFibGUoc2Vhc29uSWQpO1xuXG4gICAgICAgICRzY29wZS5wYWdlQXR0cmlidXRlcyA9IHBhZ2VBdHRyaWJ1dGVzO1xuICAgIFx0cGFnZUF0dHJpYnV0ZXMuc2V0VGl0bGUoJ1NlYXNvbiB8IEZvb3RiYWxsIERhdGEgQW5ndWxhcicpO1xuICAgIH1dXG4pO1xuJ3VzZSBzdHJpY3QnO1xuXG5mb290YmFsbERhdGEuY29udHJvbGxlcignU2l0ZUhvbWVDb250cm9sbGVyJyxcbiAgICBbXCIkc2NvcGVcIiwgXCIkbG9jYXRpb25cIiwgXCJsaXN0U2Vhc29uc1wiLCBcInBhZ2VBdHRyaWJ1dGVzXCIsIGZ1bmN0aW9uIFNpdGVIb21lQ29udHJvbGxlcigkc2NvcGUsICRsb2NhdGlvbiwgbGlzdFNlYXNvbnMsIHBhZ2VBdHRyaWJ1dGVzKSB7XG5cbiAgICBcdCRzY29wZS55ZWFyc0F2YWlsYWJsZSA9IFtcbiAgICBcdFx0XHR7aWQgOiAxLCBuYW1lOiAnMjAxMyd9LFxuXHQgICAgXHRcdHtpZCA6IDIsIG5hbWU6ICcyMDE0J30sXG5cdCAgICBcdFx0e2lkIDogMywgbmFtZTogJzIwMTUnfSxcblx0ICAgIFx0XHR7aWQgOiA0LCBuYW1lOiAnMjAxNid9XG4gICAgXHRdO1xuICAgIFx0JHNjb3BlLnNlbGVjdGVkWWVhciA9IHtpZCA6IDMsIG5hbWU6ICcyMDE1J307XG5cbiAgICBcdCRzY29wZS5zd2l0Y2hZZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIFx0XHQkc2NvcGUuc2Vhc29ucyA9IGxpc3RTZWFzb25zLmdldEFsbFNlYXNvbnMoJHNjb3BlLnNlbGVjdGVkWWVhci5uYW1lKTtcbiAgICBcdH07XG5cbiAgICAgICAgJHNjb3BlLnNlYXNvbnMgPSBsaXN0U2Vhc29ucy5nZXRBbGxTZWFzb25zKCRzY29wZS5zZWxlY3RlZFllYXIubmFtZSk7XG5cbiAgICAgICAgJHNjb3BlLnBhZ2VBdHRyaWJ1dGVzID0gcGFnZUF0dHJpYnV0ZXM7XG4gICAgICAgIHBhZ2VBdHRyaWJ1dGVzLnNldFRpdGxlKCdGb290YmFsbCBEYXRhIEFuZ3VsYXInKTtcbiAgICB9XVxuKTtcbi8qKlxuICogb3JkZXJPYmplY3RCeSBmaWx0ZXJcbiAqIGZyb20gOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNzA3MDQxNFxuICogQHBhcmFtICB7QXJyYXl9ICApIHsgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW1zLCBmaWVsZCwgcmV2ZXJzZSkgeyAgICB2YXIgZmlsdGVyZWQgW2Rlc2NyaXB0aW9uXVxuICogQHJldHVybiB7W3R5cGVdfSAgIFtkZXNjcmlwdGlvbl1cbiAqL1xuZm9vdGJhbGxEYXRhLmZpbHRlcignb3JkZXJPYmplY3RCeScsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZnVuY3Rpb24oaXRlbXMsIGZpZWxkLCByZXZlcnNlKSB7XG4gICAgdmFyIGZpbHRlcmVkID0gW107XG4gICAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICBmaWx0ZXJlZC5wdXNoKGl0ZW0pO1xuICAgIH0pO1xuICAgIGZpbHRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiAoYVtmaWVsZF0gPiBiW2ZpZWxkXSA/IDEgOiAtMSk7XG4gICAgfSk7XG4gICAgaWYocmV2ZXJzZSkgZmlsdGVyZWQucmV2ZXJzZSgpO1xuICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgfTtcbn0pO1xuJ3VzZSBzdHJpY3QnO1xuXG5mb290YmFsbERhdGEuZmlsdGVyKCd0ZWFtSWRGcm9tVXJsJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBmdW5jdGlvbih0ZWFtVXJsKSB7XG4gICAgdmFyIGlkID0gdGVhbVVybC5tYXRjaCgvXFwvKFteL10qKSQvKVsxXTtcbiAgICByZXR1cm4gaWQ7XG4gIH07XG59KTtcbi8qKlxuICogQW5ndWxhckpTIHRvQXJyYXkgRmlsdGVyXG4gKiBmcm9tIDogaHR0cHM6Ly9naXRodWIuY29tL3BldGViYWNvbmRhcndpbi9hbmd1bGFyLXRvQXJyYXlGaWx0ZXJcbiAqIEBwYXJhbSAge1t0eXBlXX0gKSB7ICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqLCBhZGRLZXkpIHsgICAgaWYgKCFhbmd1bGFyLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7ICAgIGlmICggYWRkS2V5IFtkZXNjcmlwdGlvbl1cbiAqIEByZXR1cm4ge1t0eXBlXX0gICBbZGVzY3JpcHRpb25dXG4gKi9cbmZvb3RiYWxsRGF0YS5maWx0ZXIoJ3RvQXJyYXknLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAob2JqLCBhZGRLZXkpIHtcbiAgICBpZiAoIWFuZ3VsYXIuaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgICBpZiAoIGFkZEtleSA9PT0gZmFsc2UgKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgcmV0dXJuIGFuZ3VsYXIuaXNPYmplY3QodmFsdWUpID9cbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodmFsdWUsICcka2V5JywgeyBlbnVtZXJhYmxlOiBmYWxzZSwgdmFsdWU6IGtleX0pIDpcbiAgICAgICAgICB7ICRrZXk6IGtleSwgJHZhbHVlOiB2YWx1ZSB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufSk7XG5mb290YmFsbERhdGEuZmFjdG9yeSgnbGlzdFNlYXNvbnMnLCBbXCIkcmVzb3VyY2VcIiwgXCIkaHR0cFwiLCBmdW5jdGlvbigkcmVzb3VyY2UsICRodHRwKSB7XG4gICAgLyoqXG4gICAgICogaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS8gcmVzb3VyY2VcbiAgICAgKiBlYXJsaWVzdCBzZWFzb24gaXMgMjAxMy8xNCwgdXAgdG8gY3VycmVudCBzZWFzb25cbiAgICAgKiAoICsgMjAxNi8xNyBoYXMgRXVyb3BlYW4gQ2hhbXBpb25zaGlwcyApXG4gICAgICovXG4gICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aC1Ub2tlbiddID0gYXBpS2V5O1xuICAgIHZhciByZXNvdXJjZSA9ICRyZXNvdXJjZSgnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS9zb2NjZXJzZWFzb25zLzpzaW5nbGVTZWFzb24nLFxuICAgICAgICB7c2luZ2xlU2Vhc29uOidAc2luZ2xlU2Vhc29uJ30sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJxdWVyeVwiOiB7bWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IHttZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FycmF5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlIDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0U2Vhc29uOiBmdW5jdGlvbihzZWFzb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmdldCh7c2luZ2xlU2Vhc29uOnNlYXNvbklkfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEFsbFNlYXNvbnM6IGZ1bmN0aW9uKHNlYXNvblllYXIpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZS5xdWVyeSh7c2Vhc29uOiBzZWFzb25ZZWFyfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuXG5mb290YmFsbERhdGEuZmFjdG9yeSgncGFnZUF0dHJpYnV0ZXMnLCBmdW5jdGlvbigpe1xuICB2YXIgdGl0bGUgPSAnRm9vdGJhbGwgRGF0YSBBbmd1bGFyJztcbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogZnVuY3Rpb24oKSB7IHJldHVybiB0aXRsZTsgfSxcbiAgICBzZXRUaXRsZTogZnVuY3Rpb24obmV3VGl0bGUpIHsgdGl0bGUgPSBuZXdUaXRsZTsgfVxuICB9O1xufSk7XG5mb290YmFsbERhdGEuZmFjdG9yeSgnc2Vhc29uRGV0YWlscycsIFtcIiRyZXNvdXJjZVwiLCBcIiRodHRwXCIsIGZ1bmN0aW9uKCRyZXNvdXJjZSwgJGh0dHApIHtcbiAgICAvKipcbiAgICAgKiBodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxLyByZXNvdXJjZVxuICAgICAqIGdldCBkZXRhaWxzIG9mIGEgc2luZ2xlIHNlYXNvblxuICAgICAqL1xuICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgtVG9rZW4nXSA9IGFwaUtleTtcbiAgICB2YXIgcmVzb3VyY2UgPSAkcmVzb3VyY2UoJ2h0dHA6Ly9hcGkuZm9vdGJhbGwtZGF0YS5vcmcvdjEvc29jY2Vyc2Vhc29ucy86c2luZ2xlU2Vhc29uJyxcbiAgICAgICAge3NpbmdsZVNlYXNvbjonQHNpbmdsZVNlYXNvbid9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZ2V0VGVhbXNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxL3NvY2NlcnNlYXNvbnMvOnNpbmdsZVNlYXNvbi90ZWFtcycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldEZpeHR1cmVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS9zb2NjZXJzZWFzb25zLzpzaW5nbGVTZWFzb24vZml4dHVyZXMnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldExlYWd1ZVRhYmxlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS9zb2NjZXJzZWFzb25zLzpzaW5nbGVTZWFzb24vbGVhZ3VlVGFibGUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldFRlYW1zOiBmdW5jdGlvbihzZWFzb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmdldFRlYW1zKHtzaW5nbGVTZWFzb246c2Vhc29uSWR9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Rml4dHVyZXM6IGZ1bmN0aW9uKHNlYXNvbklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZ2V0Rml4dHVyZXMoe3NpbmdsZVNlYXNvbjpzZWFzb25JZH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRMZWFndWVUYWJsZTogZnVuY3Rpb24oc2Vhc29uSWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZS5nZXRMZWFndWVUYWJsZSh7c2luZ2xlU2Vhc29uOnNlYXNvbklkfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuZm9vdGJhbGxEYXRhLmZhY3RvcnkoJ3RlYW1EZXRhaWxzJywgW1wiJHJlc291cmNlXCIsIFwiJGh0dHBcIiwgZnVuY3Rpb24oJHJlc291cmNlLCAkaHR0cCkge1xuICAgIC8qKlxuICAgICAqIGh0dHA6Ly9hcGkuZm9vdGJhbGwtZGF0YS5vcmcvdjEvIHJlc291cmNlXG4gICAgICogZ2V0IGRldGFpbHMgb2YgYSBzaW5nbGUgc2Vhc29uXG4gICAgICovXG4gICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aC1Ub2tlbiddID0gYXBpS2V5O1xuICAgIHZhciByZXNvdXJjZSA9ICRyZXNvdXJjZSgnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS90ZWFtcy86dGVhbUlkJyxcbiAgICAgICAge3RlYW1JZDonQHRlYW1JZCd9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZ2V0VGVhbVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldFBsYXllcnNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxL3RlYW1zLzp0ZWFtSWQvcGxheWVycycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldEZpeHR1cmVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS9zb2NjZXJzZWFzb25zLzp0ZWFtSWQvZml4dHVyZXMnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBsYXllcnM6IGZ1bmN0aW9uKHRlYW1JZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmdldFBsYXllcnMoe3RlYW1JZDp0ZWFtSWR9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VGVhbTogZnVuY3Rpb24odGVhbUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZ2V0VGVhbSh7dGVhbUlkOnRlYW1JZH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRGaXh0dXJlczogZnVuY3Rpb24odGVhbUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZ2V0Rml4dHVyZXMoe3RlYW1JZDp0ZWFtSWR9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5mb290YmFsbERhdGEuY29udHJvbGxlcignUGFnZUF0dHJpYnV0ZXNDb250cm9sbGVyJyxcbiAgICBmdW5jdGlvbiBQbGF5ZXJzQ29udHJvbGxlcigkc2NvcGUsIHBhZ2VBdHRyaWJ1dGVzKSB7XG4gICAgXHQkc2NvcGUucGFnZUF0dHJpYnV0ZXMgPSBwYWdlQXR0cmlidXRlcztcbiAgICB9XG4pOyIsIid1c2Ugc3RyaWN0JztcblxuZm9vdGJhbGxEYXRhLmNvbnRyb2xsZXIoJ1BsYXllcnNDb250cm9sbGVyJyxcbiAgICBmdW5jdGlvbiBQbGF5ZXJzQ29udHJvbGxlcigkc2NvcGUsICRsb2NhdGlvbiwgdGVhbURldGFpbHMsICRyb3V0ZVBhcmFtcywgJHJvdXRlLCBwYWdlQXR0cmlidXRlcykge1xuICAgIFx0dmFyIHRlYW1JZCA9ICRyb3V0ZS5jdXJyZW50LnBhdGhQYXJhbXMudGVhbUlkO1xuICAgIFx0JHNjb3BlLnRlYW0gPSB0ZWFtRGV0YWlscy5nZXRUZWFtKHRlYW1JZCk7XG4gICAgICAgICRzY29wZS5wbGF5ZXJzID0gdGVhbURldGFpbHMuZ2V0UGxheWVycyh0ZWFtSWQpO1xuXG4gICAgXHQkc2NvcGUucGFnZUF0dHJpYnV0ZXMgPSBwYWdlQXR0cmlidXRlcztcbiAgICBcdHBhZ2VBdHRyaWJ1dGVzLnNldFRpdGxlKCdQbGF5ZXJzIHwgRm9vdGJhbGwgRGF0YSBBbmd1bGFyJyk7XG4gICAgfVxuKTsiLCIndXNlIHN0cmljdCc7XG5cbmZvb3RiYWxsRGF0YS5jb250cm9sbGVyKCdTZWFzb25Db250cm9sbGVyJyxcbiAgICBmdW5jdGlvbiBTZWFzb25Db250cm9sbGVyKCRzY29wZSwgJGxvY2F0aW9uLCBsaXN0U2Vhc29ucywgc2Vhc29uRGV0YWlscywgJHJvdXRlUGFyYW1zLCAkcm91dGUsIHBhZ2VBdHRyaWJ1dGVzKSB7XG4gICAgXHR2YXIgc2Vhc29uSWQgPSAkcm91dGUuY3VycmVudC5wYXRoUGFyYW1zLnNlYXNvbklkO1xuICAgICAgICAkc2NvcGUuc2luZ2xlU2Vhc29uID0gbGlzdFNlYXNvbnMuZ2V0U2Vhc29uKHNlYXNvbklkKTtcbiAgICAgICAgJHNjb3BlLnRlYW1zID0gc2Vhc29uRGV0YWlscy5nZXRUZWFtcyhzZWFzb25JZCk7XG4gICAgICAgICRzY29wZS5maXh0dXJlcyA9IHNlYXNvbkRldGFpbHMuZ2V0Rml4dHVyZXMoc2Vhc29uSWQpO1xuICAgICAgICAkc2NvcGUubGVhZ3VlVGFibGUgPSBzZWFzb25EZXRhaWxzLmdldExlYWd1ZVRhYmxlKHNlYXNvbklkKTtcblxuICAgICAgICAkc2NvcGUucGFnZUF0dHJpYnV0ZXMgPSBwYWdlQXR0cmlidXRlcztcbiAgICBcdHBhZ2VBdHRyaWJ1dGVzLnNldFRpdGxlKCdTZWFzb24gfCBGb290YmFsbCBEYXRhIEFuZ3VsYXInKTtcbiAgICB9XG4pOyIsIid1c2Ugc3RyaWN0JztcblxuZm9vdGJhbGxEYXRhLmNvbnRyb2xsZXIoJ1NpdGVIb21lQ29udHJvbGxlcicsXG4gICAgZnVuY3Rpb24gU2l0ZUhvbWVDb250cm9sbGVyKCRzY29wZSwgJGxvY2F0aW9uLCBsaXN0U2Vhc29ucywgcGFnZUF0dHJpYnV0ZXMpIHtcblxuICAgIFx0JHNjb3BlLnllYXJzQXZhaWxhYmxlID0gW1xuICAgIFx0XHRcdHtpZCA6IDEsIG5hbWU6ICcyMDEzJ30sXG5cdCAgICBcdFx0e2lkIDogMiwgbmFtZTogJzIwMTQnfSxcblx0ICAgIFx0XHR7aWQgOiAzLCBuYW1lOiAnMjAxNSd9LFxuXHQgICAgXHRcdHtpZCA6IDQsIG5hbWU6ICcyMDE2J31cbiAgICBcdF07XG4gICAgXHQkc2NvcGUuc2VsZWN0ZWRZZWFyID0ge2lkIDogMywgbmFtZTogJzIwMTUnfTtcblxuICAgIFx0JHNjb3BlLnN3aXRjaFllYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgXHRcdCRzY29wZS5zZWFzb25zID0gbGlzdFNlYXNvbnMuZ2V0QWxsU2Vhc29ucygkc2NvcGUuc2VsZWN0ZWRZZWFyLm5hbWUpO1xuICAgIFx0fTtcblxuICAgICAgICAkc2NvcGUuc2Vhc29ucyA9IGxpc3RTZWFzb25zLmdldEFsbFNlYXNvbnMoJHNjb3BlLnNlbGVjdGVkWWVhci5uYW1lKTtcblxuICAgICAgICAkc2NvcGUucGFnZUF0dHJpYnV0ZXMgPSBwYWdlQXR0cmlidXRlcztcbiAgICAgICAgcGFnZUF0dHJpYnV0ZXMuc2V0VGl0bGUoJ0Zvb3RiYWxsIERhdGEgQW5ndWxhcicpO1xuICAgIH1cbik7IiwiLyoqXG4gKiBvcmRlck9iamVjdEJ5IGZpbHRlclxuICogZnJvbSA6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI3MDcwNDE0XG4gKiBAcGFyYW0gIHtBcnJheX0gICkgeyAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oaXRlbXMsIGZpZWxkLCByZXZlcnNlKSB7ICAgIHZhciBmaWx0ZXJlZCBbZGVzY3JpcHRpb25dXG4gKiBAcmV0dXJuIHtbdHlwZV19ICAgW2Rlc2NyaXB0aW9uXVxuICovXG5mb290YmFsbERhdGEuZmlsdGVyKCdvcmRlck9iamVjdEJ5JywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBmdW5jdGlvbihpdGVtcywgZmllbGQsIHJldmVyc2UpIHtcbiAgICB2YXIgZmlsdGVyZWQgPSBbXTtcbiAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGZpbHRlcmVkLnB1c2goaXRlbSk7XG4gICAgfSk7XG4gICAgZmlsdGVyZWQuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIChhW2ZpZWxkXSA+IGJbZmllbGRdID8gMSA6IC0xKTtcbiAgICB9KTtcbiAgICBpZihyZXZlcnNlKSBmaWx0ZXJlZC5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIGZpbHRlcmVkO1xuICB9O1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5mb290YmFsbERhdGEuZmlsdGVyKCd0ZWFtSWRGcm9tVXJsJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBmdW5jdGlvbih0ZWFtVXJsKSB7XG4gICAgdmFyIGlkID0gdGVhbVVybC5tYXRjaCgvXFwvKFteL10qKSQvKVsxXTtcbiAgICByZXR1cm4gaWQ7XG4gIH07XG59KTsiLCIvKipcbiAqIEFuZ3VsYXJKUyB0b0FycmF5IEZpbHRlclxuICogZnJvbSA6IGh0dHBzOi8vZ2l0aHViLmNvbS9wZXRlYmFjb25kYXJ3aW4vYW5ndWxhci10b0FycmF5RmlsdGVyXG4gKiBAcGFyYW0gIHtbdHlwZV19ICkgeyAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgYWRkS2V5KSB7ICAgIGlmICghYW5ndWxhci5pc09iamVjdChvYmopKSByZXR1cm4gb2JqOyAgICBpZiAoIGFkZEtleSBbZGVzY3JpcHRpb25dXG4gKiBAcmV0dXJuIHtbdHlwZV19ICAgW2Rlc2NyaXB0aW9uXVxuICovXG5mb290YmFsbERhdGEuZmlsdGVyKCd0b0FycmF5JywgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgYWRkS2V5KSB7XG4gICAgaWYgKCFhbmd1bGFyLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gICAgaWYgKCBhZGRLZXkgPT09IGZhbHNlICkge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHJldHVybiBhbmd1bGFyLmlzT2JqZWN0KHZhbHVlKSA/XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbHVlLCAnJGtleScsIHsgZW51bWVyYWJsZTogZmFsc2UsIHZhbHVlOiBrZXl9KSA6XG4gICAgICAgICAgeyAka2V5OiBrZXksICR2YWx1ZTogdmFsdWUgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pOyIsImZvb3RiYWxsRGF0YS5mYWN0b3J5KCdsaXN0U2Vhc29ucycsIGZ1bmN0aW9uKCRyZXNvdXJjZSwgJGh0dHApIHtcbiAgICAvKipcbiAgICAgKiBodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxLyByZXNvdXJjZVxuICAgICAqIGVhcmxpZXN0IHNlYXNvbiBpcyAyMDEzLzE0LCB1cCB0byBjdXJyZW50IHNlYXNvblxuICAgICAqICggKyAyMDE2LzE3IGhhcyBFdXJvcGVhbiBDaGFtcGlvbnNoaXBzIClcbiAgICAgKi9cbiAgICAkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1BdXRoLVRva2VuJ10gPSBhcGlLZXk7XG4gICAgdmFyIHJlc291cmNlID0gJHJlc291cmNlKCdodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxL3NvY2NlcnNlYXNvbnMvOnNpbmdsZVNlYXNvbicsXG4gICAgICAgIHtzaW5nbGVTZWFzb246J0BzaW5nbGVTZWFzb24nfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcInF1ZXJ5XCI6IHttZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZSA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FycmF5OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJnZXRcIjoge21ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRTZWFzb246IGZ1bmN0aW9uKHNlYXNvbklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZ2V0KHtzaW5nbGVTZWFzb246c2Vhc29uSWR9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0QWxsU2Vhc29uczogZnVuY3Rpb24oc2Vhc29uWWVhcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLnF1ZXJ5KHtzZWFzb246IHNlYXNvblllYXJ9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsImZvb3RiYWxsRGF0YS5mYWN0b3J5KCdwYWdlQXR0cmlidXRlcycsIGZ1bmN0aW9uKCl7XG4gIHZhciB0aXRsZSA9ICdGb290YmFsbCBEYXRhIEFuZ3VsYXInO1xuICByZXR1cm4ge1xuICAgIHRpdGxlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRpdGxlOyB9LFxuICAgIHNldFRpdGxlOiBmdW5jdGlvbihuZXdUaXRsZSkgeyB0aXRsZSA9IG5ld1RpdGxlOyB9XG4gIH07XG59KTsiLCJmb290YmFsbERhdGEuZmFjdG9yeSgnc2Vhc29uRGV0YWlscycsIGZ1bmN0aW9uKCRyZXNvdXJjZSwgJGh0dHApIHtcbiAgICAvKipcbiAgICAgKiBodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxLyByZXNvdXJjZVxuICAgICAqIGdldCBkZXRhaWxzIG9mIGEgc2luZ2xlIHNlYXNvblxuICAgICAqL1xuICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgtVG9rZW4nXSA9IGFwaUtleTtcbiAgICB2YXIgcmVzb3VyY2UgPSAkcmVzb3VyY2UoJ2h0dHA6Ly9hcGkuZm9vdGJhbGwtZGF0YS5vcmcvdjEvc29jY2Vyc2Vhc29ucy86c2luZ2xlU2Vhc29uJyxcbiAgICAgICAge3NpbmdsZVNlYXNvbjonQHNpbmdsZVNlYXNvbid9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZ2V0VGVhbXNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxL3NvY2NlcnNlYXNvbnMvOnNpbmdsZVNlYXNvbi90ZWFtcycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldEZpeHR1cmVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS9zb2NjZXJzZWFzb25zLzpzaW5nbGVTZWFzb24vZml4dHVyZXMnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldExlYWd1ZVRhYmxlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS9zb2NjZXJzZWFzb25zLzpzaW5nbGVTZWFzb24vbGVhZ3VlVGFibGUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldFRlYW1zOiBmdW5jdGlvbihzZWFzb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmdldFRlYW1zKHtzaW5nbGVTZWFzb246c2Vhc29uSWR9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Rml4dHVyZXM6IGZ1bmN0aW9uKHNlYXNvbklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZ2V0Rml4dHVyZXMoe3NpbmdsZVNlYXNvbjpzZWFzb25JZH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRMZWFndWVUYWJsZTogZnVuY3Rpb24oc2Vhc29uSWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZS5nZXRMZWFndWVUYWJsZSh7c2luZ2xlU2Vhc29uOnNlYXNvbklkfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7IiwiZm9vdGJhbGxEYXRhLmZhY3RvcnkoJ3RlYW1EZXRhaWxzJywgZnVuY3Rpb24oJHJlc291cmNlLCAkaHR0cCkge1xuICAgIC8qKlxuICAgICAqIGh0dHA6Ly9hcGkuZm9vdGJhbGwtZGF0YS5vcmcvdjEvIHJlc291cmNlXG4gICAgICogZ2V0IGRldGFpbHMgb2YgYSBzaW5nbGUgc2Vhc29uXG4gICAgICovXG4gICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aC1Ub2tlbiddID0gYXBpS2V5O1xuICAgIHZhciByZXNvdXJjZSA9ICRyZXNvdXJjZSgnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS90ZWFtcy86dGVhbUlkJyxcbiAgICAgICAge3RlYW1JZDonQHRlYW1JZCd9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZ2V0VGVhbVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldFBsYXllcnNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vYXBpLmZvb3RiYWxsLWRhdGEub3JnL3YxL3RlYW1zLzp0ZWFtSWQvcGxheWVycycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImdldEZpeHR1cmVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXJyYXk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS5mb290YmFsbC1kYXRhLm9yZy92MS9zb2NjZXJzZWFzb25zLzp0ZWFtSWQvZml4dHVyZXMnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldFBsYXllcnM6IGZ1bmN0aW9uKHRlYW1JZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmdldFBsYXllcnMoe3RlYW1JZDp0ZWFtSWR9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VGVhbTogZnVuY3Rpb24odGVhbUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZ2V0VGVhbSh7dGVhbUlkOnRlYW1JZH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRGaXh0dXJlczogZnVuY3Rpb24odGVhbUlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZ2V0Rml4dHVyZXMoe3RlYW1JZDp0ZWFtSWR9KTtcbiAgICAgICAgfVxuICAgIH07XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
